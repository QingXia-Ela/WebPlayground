import{r as x,o as F,a as B,_ as V,b as N,c as R,d as m,e as G,f as J,F as U,g as $,w as I,v as j,h as H,i as K,t as W,j as q}from"./index.7e3a70b4.js";const X={name:"CanvasDamedane",props:["inputData"],setup(i){const n=x(null),s=x(null);let t={vx:0,vy:0,x:0,y:0,ox:0,oy:0},u=x(0);const D=()=>{cancelAnimationFrame(u.value);let d=[];if(n.value&&s.value){const{inputData:y}=i;let{ROW:l,COL:c,SPACING:C,THICKNESS:f,DRAG:g,EASE:b,adsorbentMode:L}=y;f=Math.pow(f,2);let P=l*c,h=n.value,k=0,A=0,S=-300,w=-300;const o=h.getContext("2d");k=h.width=c*C,A=h.height=l*C;for(let a=0;a<P;a++){let e=Object.create(t);e.x=e.ox=C*(a%c),e.y=e.oy=C*Math.floor(a/c),d.push(e)}h.addEventListener("mousemove",a=>{const e=h.getBoundingClientRect();S=a.clientX-e.left,w=a.clientY-e.top});const E=()=>{for(let a=0;a<d.length;a++){let e=d[a],p=0;if(L){let v=S-e.ox,_=w-e.oy,T=S-e.x,r=w-e.y,O=v*v+_*_,M=f/O;O<f&&M>2.5&&(M=8),p=Math.atan2(r,T),e.vx+=M*Math.cos(p),e.vy+=M*Math.sin(p),e.x+=(e.vx*=g)+(e.ox-e.x)*b,e.y+=(e.vy*=g)+(e.oy-e.y)*b}else{let v=S-e.x,_=w-e.y,T=v*v+_*_,r=f/T;r=r>7?7:r,p=Math.atan2(_,v),e.vx+=r*Math.cos(p),e.vy+=r*Math.sin(p),e.x-=(e.vx*=g)-(e.ox-e.x)*b,e.y-=(e.vy*=g)-(e.oy-e.y)*b}}o==null||o.clearRect(0,0,k,A);for(let a=0;a<d.length;a++){let e=d[a];o&&(o.beginPath(),o.arc(e.x+2,e.y+2,1.8,0,360),o.fillStyle="#aaa",o.fill(),o.closePath())}u.value=requestAnimationFrame(E)};E()}};return F(()=>{D()}),B(()=>{console.log("damedane update data"),D()}),{canvasRef:n,damedaneRef:s}}};const Y={class:"damedane",ref:"damedaneRef"},z={ref:"canvasRef"};function Q(i,n,s,t,u,D){return N(),R("div",Y,[m("canvas",z,null,512)],512)}const Z=V(X,[["render",Q],["__scopeId","data-v-1e4b4439"]]),ee={name:"akDamedane",components:{CanvasVue:Z},setup(){let i=G({ROW:50,COL:50,SPACING:10,THICKNESS:100,DRAG:.9,EASE:.95,adsorbentMode:!1}),n=x(JSON.parse(JSON.stringify(i))),s=x(!1);return{inputData:i,syncData:()=>{n.value=JSON.parse(JSON.stringify(i)),s.value=!1},canvasData:n,showTip:()=>{s.value=!0},showTipMark:s}}};const ae={class:"damedane_wrapper"},te={class:"options_box"},ne=["type","onUpdate:modelValue","placeholder"],oe={class:"tip"};function se(i,n,s,t,u,D){const d=J("CanvasVue");return N(),R("div",ae,[m("div",te,[(N(!0),R(U,null,$(t.inputData,(y,l)=>(N(),R("div",{key:l},[K(W(l)+" ",1),I(m("input",{type:typeof y=="boolean"?"checkbox":"text","onUpdate:modelValue":c=>t.inputData[l]=c,onChange:n[0]||(n[0]=(...c)=>t.showTip&&t.showTip(...c)),placeholder:l},null,40,ne),[[q,t.inputData[l],void 0,{number:!0}]])]))),128)),m("button",{onClick:n[1]||(n[1]=(...y)=>t.syncData&&t.syncData(...y))},"update"),I(m("div",oe," data change! click update to see new canvas ",512),[[j,t.showTipMark]])]),H(d,{inputData:t.canvasData},null,8,["inputData"])])}const ce=V(ee,[["render",se],["__scopeId","data-v-6b1257b4"]]);export{ce as default};
